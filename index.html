<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Video Player - Auto Hide & Loading</title>
<style>
  :root{
    --bg:#070707;
    --panel:#110000;
    --accent:#ff4444;
    --muted:#ffb6b6;
    --glass: rgba(255,68,68,0.06);
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:linear-gradient(180deg,#050506 0%,#0b0b0d 100%);color:#fff;font-family:system-ui,-apple-system,"Segoe UI",Tahoma,Arial,Helvetica;direction:ltr}
  
  .player-wrap{
    position:relative;
    max-width:960px;
    margin:28px auto;
    background:linear-gradient(180deg,#000 0%,#080000 60%);
    border-radius:14px;
    overflow:hidden;
    box-shadow:0 12px 50px rgba(8,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
    border:1px solid rgba(255,68,68,0.04);
    /* Ø¨Ø±Ø§ÛŒ Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ù†Ø´Ø§Ù†Ú¯Ø± Ù…ÙˆØ³ ÙˆÙ‚ØªÛŒ Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§ Ù…Ø®ÙÛŒ Ù‡Ø³ØªÙ†Ø¯ */
    cursor: default;
  }

  /* --- Auto-Hide Styles --- */
  .player-wrap.hide-controls {
    cursor: none; /* Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ù…ÙˆØ³ */
  }
  
  .player-wrap.hide-controls .controls,
  .player-wrap.hide-controls .big-play {
    opacity: 0;
    pointer-events: none; /* Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ú©Ù„ÛŒÚ© ÙˆÙ‚ØªÛŒ Ù…Ø®ÙÛŒ Ù‡Ø³ØªÙ†Ø¯ */
    transition: opacity 0.4s ease;
  }

  video{width:100%;height:auto;display:block;background:#000}
  
  .controls{
    position:absolute;left:0;right:0;bottom:0;padding:14px;
    background:linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(8,0,0,0.6) 40%, rgba(0,0,0,0.9) 100%);
    box-sizing:border-box;
    backdrop-filter: blur(0px);
    transition: opacity 0.3s ease;
    opacity: 1;
  }

  .row{display:flex;align-items:center;gap:10px}
  .left{display:flex;align-items:center;gap:10px}
  
  button.icon{
    background:transparent;border:0;color:#fff;padding:8px;border-radius:10px;cursor:pointer;font-size:16px;
    transition:background .18s, transform .12s;
  }
  button.icon:hover{background:var(--glass); transform:translateY(-2px)}
  
  .big-play{
    position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:20;
    background:linear-gradient(135deg,var(--accent),#ff8b8b);
    border-radius:999px;border:0;padding:18px 22px;font-size:22px;color:#fff;cursor:pointer;
    box-shadow:0 10px 30px rgba(255,68,68,0.14);
    transition: opacity 0.3s ease, transform 0.2s;
  }
  .big-play:hover{ transform:translate(-50%,-50%) scale(1.05); }
  .big-play.hidden{display:none}
  
  .progress{
    height:8px;background:rgba(255,68,68,0.06);border-radius:999px;position:relative;cursor:pointer;flex:1;overflow:hidden;
    box-shadow:inset 0 1px 0 rgba(255,255,255,0.02);
  }
  .progress .bar{
    height:100%;
    background:linear-gradient(90deg,var(--accent),#ffb3b3);
    width:0%;
    transition:width .08s linear;
    border-radius:999px;
  }
  .thumb{
    position:absolute;top:50%;transform:translateY(-50%) translateX(-50%);width:14px;height:14px;background:#ffeded;border-radius:50%;left:0;
    box-shadow:0 4px 14px rgba(0,0,0,0.6);pointer-events:none;opacity:0;transition:opacity .12s, left .08s;
  }
  .progress:hover .thumb{opacity:1}
  .time{font-size:13px;color:var(--muted);min-width:96px;text-align:left}
  .right{display:flex;align-items:center;gap:8px}
  
  .menu{position:relative}
  .menu .panel{
    position:absolute;left:0;bottom:48px;background:linear-gradient(180deg,#120000,#150000);
    padding:6px;border-radius:10px;min-width:140px;box-shadow:0 12px 32px rgba(0,0,0,.6);display:none;z-index:30;border:1px solid rgba(255,68,68,0.04)
  }
  .menu .panel button{display:block;width:100%;text-align:left;padding:10px;border:0;background:transparent;color:#fff;cursor:pointer;border-radius:8px;font-size:14px}
  .menu .panel button:hover{background:rgba(255,68,68,0.03)}
  
  .seek-tooltip{position:absolute;padding:6px 8px;background:#160000;border-radius:6px;font-size:12px;transform:translate(-50%,-140%);display:none;pointer-events:none;border:1px solid rgba(255,68,68,0.04)}
  .subtitle{position:absolute;left:50%;transform:translateX(-50%);bottom:72px;color:#fff;background:linear-gradient(180deg,rgba(8,0,0,0.7),rgba(8,0,0,0.4));padding:8px 12px;border-radius:8px;font-size:15px;max-width:85%;text-align:center; transition: bottom 0.3s ease;}
  .subtitle.hidden{display:none}
  
  /* ÙˆÙ‚ØªÛŒ Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§ Ù…Ø®ÙÛŒ Ù…ÛŒØ´Ù†ØŒ Ø²ÛŒØ±Ù†ÙˆÛŒØ³ Ú©Ù…ÛŒ Ø¨ÛŒØ§Ø¯ Ù¾Ø§ÛŒÛŒÙ†â€ŒØªØ± Ú©Ù‡ Ù‚Ø´Ù†Ú¯â€ŒØªØ± Ø¨Ø´Ù‡ */
  .player-wrap.hide-controls .subtitle { bottom: 20px; }

  .controls .muted{opacity:.6}
  .small{font-size:13px;padding:6px 8px;border-radius:8px;background:rgba(255,68,68,0.04);border:1px solid rgba(255,68,68,0.06)}

  /* --- LOADING SPINNER STYLES --- */
  .loader-wrap {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    width: 60px; height: 60px;
    display: none; /* Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ù…Ø®ÙÛŒ */
    justify-content: center; align-items: center;
    z-index: 50;
    pointer-events: none;
  }
  .loader-wrap.active { display: flex; }

  .loader { position: relative; width: 100%; height: 100%; }
  .loader > div {
    position: absolute;
    width: 5px; height: 16px; /* Ø§Ù†Ø¯Ø§Ø²Ù‡ Ù…Ø³ØªØ·ÛŒÙ„â€ŒÙ‡Ø§ */
    background: #ffffff;
    border-radius: 4px;
    opacity: 0;
    left: 50%; top: 50%;
    transform-origin: center; /* Ù…Ø±Ú©Ø² Ø¯ÙˆØ±Ø§Ù† */
    animation: loader-fade 1s linear infinite;
  }

  /* Ø§Ù†ÛŒÙ…ÛŒØ´Ù† Ú†Ø´Ù…Ú© Ø²Ù† */
  @keyframes loader-fade {
    0% { opacity: 1; }
    100% { opacity: 0; }
  }

  /* ØªÙ†Ø¸ÛŒÙ… Ù…ÙˆÙ‚Ø¹ÛŒØª Ùˆ ØªØ§Ø®ÛŒØ± Ø²Ù…Ø§Ù†ÛŒ Ø¨Ø±Ø§ÛŒ 16 Ù…Ø³ØªØ·ÛŒÙ„ */
  /* 360 Ø¯Ø±Ø¬Ù‡ ØªÙ‚Ø³ÛŒÙ… Ø¨Ø± 16 Ù…ÛŒØ´Ù‡ 22.5 Ø¯Ø±Ø¬Ù‡ ÙØ§ØµÙ„Ù‡ Ù‡Ø± Ú©Ø¯Ø§Ù… */
  /* ÙØ§ØµÙ„Ù‡ Ø§Ø² Ù…Ø±Ú©Ø² (translateY) Ø±Ùˆ ØªÙ†Ø¸ÛŒÙ… Ù…ÛŒÚ©Ù†ÛŒÙ… */
  
  .loader > div:nth-child(1)  { transform: translate(-50%, -50%) rotate(0deg) translate(0, -20px); animation-delay: 0s; }
  .loader > div:nth-child(2)  { transform: translate(-50%, -50%) rotate(22.5deg) translate(0, -20px); animation-delay: -0.9375s; }
  .loader > div:nth-child(3)  { transform: translate(-50%, -50%) rotate(45deg) translate(0, -20px); animation-delay: -0.875s; }
  .loader > div:nth-child(4)  { transform: translate(-50%, -50%) rotate(67.5deg) translate(0, -20px); animation-delay: -0.8125s; }
  .loader > div:nth-child(5)  { transform: translate(-50%, -50%) rotate(90deg) translate(0, -20px); animation-delay: -0.75s; }
  .loader > div:nth-child(6)  { transform: translate(-50%, -50%) rotate(112.5deg) translate(0, -20px); animation-delay: -0.6875s; }
  .loader > div:nth-child(7)  { transform: translate(-50%, -50%) rotate(135deg) translate(0, -20px); animation-delay: -0.625s; }
  .loader > div:nth-child(8)  { transform: translate(-50%, -50%) rotate(157.5deg) translate(0, -20px); animation-delay: -0.5625s; }
  .loader > div:nth-child(9)  { transform: translate(-50%, -50%) rotate(180deg) translate(0, -20px); animation-delay: -0.5s; }
  .loader > div:nth-child(10) { transform: translate(-50%, -50%) rotate(202.5deg) translate(0, -20px); animation-delay: -0.4375s; }
  .loader > div:nth-child(11) { transform: translate(-50%, -50%) rotate(225deg) translate(0, -20px); animation-delay: -0.375s; }
  .loader > div:nth-child(12) { transform: translate(-50%, -50%) rotate(247.5deg) translate(0, -20px); animation-delay: -0.3125s; }
  .loader > div:nth-child(13) { transform: translate(-50%, -50%) rotate(270deg) translate(0, -20px); animation-delay: -0.25s; }
  .loader > div:nth-child(14) { transform: translate(-50%, -50%) rotate(292.5deg) translate(0, -20px); animation-delay: -0.1875s; }
  .loader > div:nth-child(15) { transform: translate(-50%, -50%) rotate(315deg) translate(0, -20px); animation-delay: -0.125s; }
  .loader > div:nth-child(16) { transform: translate(-50%, -50%) rotate(337.5deg) translate(0, -20px); animation-delay: -0.0625s; }


  @media (max-width:640px){
    .controls{padding:10px}
    .big-play{padding:12px 14px;font-size:18px}
    .time{min-width:74px;font-size:12px}
  }
</style>
</head>
<body>

<div class="player-wrap" id="playerWrap">
  <video id="video" preload="metadata" playsinline crossorigin="anonymous" poster="">
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <source id="main-src" src="https://node272-sector8559613.eu.cold-storage.cdn50.cc/f4/f495689da6c6622d1fff895963dfc793/3731335f506c7572696275732e5330314530332e373230702e5745422e444c2e4475626c652e4d794d6f76697a2e6d7034/EAEBBN/1763545304/b0312ca72bf461346910016e0231fe4435dcdc==/86.55.158.6/1150/" type="video/mp4">
    <track id="track-en" label="English" kind="subtitles" srclang="en" src="" default>
    Your browser does not support the video tag.
  </video>

  <div class="loader-wrap" id="loaderWrap">
    <div class="loader">
      <div></div><div></div><div></div><div></div>
      <div></div><div></div><div></div><div></div>
      <div></div><div></div><div></div><div></div>
      <div></div><div></div><div></div><div></div>
    </div>
  </div>

  <button id="bigPlay" class="big-play">â–º Play</button>

  <div class="subtitle hidden" id="subtitle"></div>

  <div class="controls">
    <div class="row" style="margin-bottom:10px">
      <div class="left" style="flex:1">
        <button id="playBtn" class="icon" title="Play / Pause">â–º</button>
        <button id="muteBtn" class="icon" title="Mute">ðŸ”Š</button>
        <input id="volume" type="range" min="0" max="1" step="0.01" value="1" style="width:96px">
        <div style="width:6px"></div>
        <div class="progress" id="progress">
          <div class="bar" id="bar"></div>
          <div class="thumb" id="thumb"></div>
          <div class="seek-tooltip" id="seekTooltip">00:00</div>
        </div>
      </div>
      <div class="time" id="time">00:00 / 00:00</div>
    </div>

    <div class="row" style="justify-content:space-between">
      <div class="left">
        <div class="menu">
          <button id="speedBtn" class="icon">1Ã—</button>
          <div class="panel" id="speedPanel" aria-hidden="true">
            <button data-speed="0.5">0.5Ã—</button>
            <button data-speed="0.75">0.75Ã—</button>
            <button data-speed="1">1Ã—</button>
            <button data-speed="1.25">1.25Ã—</button>
            <button data-speed="1.5">1.5Ã—</button>
            <button data-speed="2">2Ã—</button>
          </div>
        </div>

        <div class="menu">
          <button id="ccBtn" class="icon">CC</button>
          <div class="panel" id="ccPanel" aria-hidden="true">
            <button data-cc="on">On</button>
            <button data-cc="off">Off</button>
          </div>
        </div>

        <button id="pipBtn" class="icon" title="Picture-in-Picture">â¤¢</button>
      </div>

      <div class="right">
        <button id="fsBtn" class="icon" title="Fullscreen">â¤¢</button>
        <button id="downloadBtn" class="icon small" title="Download">â¬‡ Download</button>
      </div>
    </div>
  </div>
</div>

<script>
(function(){
  const video = document.getElementById('video');
  const playerWrap = document.getElementById('playerWrap');
  const playBtn = document.getElementById('playBtn');
  const bigPlay = document.getElementById('bigPlay');
  const muteBtn = document.getElementById('muteBtn');
  const volume = document.getElementById('volume');
  const progress = document.getElementById('progress');
  const bar = document.getElementById('bar');
  const thumb = document.getElementById('thumb');
  const time = document.getElementById('time');
  const speedBtn = document.getElementById('speedBtn');
  const speedPanel = document.getElementById('speedPanel');
  const ccBtn = document.getElementById('ccBtn');
  const ccPanel = document.getElementById('ccPanel');
  const fsBtn = document.getElementById('fsBtn');
  const pipBtn = document.getElementById('pipBtn');
  const downloadBtn = document.getElementById('downloadBtn');
  const seekTooltip = document.getElementById('seekTooltip');
  const subtitleEl = document.getElementById('subtitle');
  const trackEl = document.getElementById('track-en');
  const loaderWrap = document.getElementById('loaderWrap');

  video.controls = false;
  video.preload = 'metadata';
  let isDragging = false;
  let wasPlaying = false;
  let hideControlsTimer; // ØªØ§ÛŒÙ…Ø± Ø¨Ø±Ø§ÛŒ Ù…Ø®ÙÛŒ Ú©Ø±Ø¯Ù† Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§

  function formatTime(s){
    if (!isFinite(s)) return '00:00';
    const h = Math.floor(s/3600);
    const m = Math.floor((s%3600)/60);
    const sec = Math.floor(s%60);
    if (h>0) return `${h}:${String(m).padStart(2,'0')}:${String(sec).padStart(2,'0')}`;
    return `${String(m).padStart(2,'0')}:${String(sec).padStart(2,'0')}`;
  }

  video.addEventListener('timeupdate', ()=>{
    const pct = (video.currentTime / (video.duration || 1)) * 100;
    bar.style.width = pct + '%';
    thumb.style.left = pct + '%';
    time.textContent = `${formatTime(video.currentTime)} / ${formatTime(video.duration)}`;
  });

  video.addEventListener('loadedmetadata', ()=>{
    time.textContent = `${formatTime(0)} / ${formatTime(video.duration)}`;
  });

  function togglePlay(){
    if (video.paused) { video.play(); }
    else { video.pause(); }
  }
  
  playBtn.addEventListener('click', togglePlay);
  bigPlay.addEventListener('click', togglePlay);
  
  video.addEventListener('play', ()=>{
    playBtn.textContent = 'âšâš';
    bigPlay.classList.add('hidden');
    startHideTimer(); // Ø´Ø±ÙˆØ¹ ØªØ§ÛŒÙ…Ø± Ù…Ø®ÙÛŒ Ø³Ø§Ø²ÛŒ
  });
  
  video.addEventListener('pause', ()=>{
    playBtn.textContent = 'â–º';
    bigPlay.classList.remove('hidden');
    showControls(); // Ù†Ù…Ø§ÛŒØ´ Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§ Ø¯Ø± Ø­Ø§Ù„Øª ØªÙˆÙ‚Ù
    stopHideTimer(); // ØªÙˆÙ‚Ù ØªØ§ÛŒÙ…Ø±
  });

  // --- Auto Hide Logic ---
  function showControls() {
    playerWrap.classList.remove('hide-controls');
  }

  function hideControls() {
    // Ø§Ú¯Ø± ÙˆÛŒØ¯ÛŒÙˆ Ø¯Ø± Ø­Ø§Ù„ Ù¾Ø®Ø´ Ø§Ø³Øª Ùˆ Ù…Ù†ÙˆÛŒÛŒ Ø¨Ø§Ø² Ù†ÛŒØ³ØªØŒ Ù…Ø®ÙÛŒ Ú©Ù†
    if (!video.paused && speedPanel.style.display !== 'block' && ccPanel.style.display !== 'block') {
      playerWrap.classList.add('hide-controls');
    }
  }

  function startHideTimer() {
    stopHideTimer();
    hideControlsTimer = setTimeout(hideControls, 3000); // Ø¨Ø¹Ø¯ Ø§Ø² 3 Ø«Ø§Ù†ÛŒÙ‡
  }

  function stopHideTimer() {
    clearTimeout(hideControlsTimer);
  }

  // ÙˆÙ‚ØªÛŒ Ù…ÙˆØ³ Ø­Ø±Ú©Øª Ù…ÛŒÚ©Ù†Ù‡
  playerWrap.addEventListener('mousemove', () => {
    showControls();
    if (!video.paused) startHideTimer();
  });

  // ÙˆÙ‚ØªÛŒ Ù…ÙˆØ³ Ø®Ø§Ø±Ø¬ Ù…ÛŒØ´Ù‡
  playerWrap.addEventListener('mouseleave', () => {
    if (!video.paused) hideControls();
  });
  // --- End Auto Hide Logic ---


  volume.addEventListener('input', ()=>{ video.volume = volume.value; video.muted = video.volume===0; updateMuteIcon(); });
  muteBtn.addEventListener('click', ()=>{ video.muted = !video.muted; if (!video.muted) volume.value = video.volume; updateMuteIcon(); });
  function updateMuteIcon(){ muteBtn.textContent = video.muted || video.volume===0 ? 'ðŸ”ˆ' : 'ðŸ”Š'; }

  function seekToClientX(clientX){
    const rect = progress.getBoundingClientRect();
    const pct = Math.max(0, Math.min(1, (clientX - rect.left) / rect.width));
    video.currentTime = pct * (video.duration || 0);
  }
  
  progress.addEventListener('mousedown', e=>{
    isDragging = true;
    wasPlaying = !video.paused;
    if (wasPlaying) video.pause();
    seekToClientX(e.clientX);
    showControls(); // Ù‡Ù†Ú¯Ø§Ù… Ú©Ø´ÛŒØ¯Ù† Ù†ÙˆØ§Ø±ØŒ Ú©Ù†ØªØ±Ù„â€ŒÙ‡Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´ÙˆÙ†Ø¯
    stopHideTimer();
  });
  
  window.addEventListener('mousemove', e=>{
    if (isDragging) seekToClientX(e.clientX);
    const rect = progress.getBoundingClientRect();
    const x = Math.max(rect.left, Math.min(rect.right, e.clientX));
    const pct = (x - rect.left) / rect.width;
    seekTooltip.style.left = (pct*100) + '%';
    seekTooltip.style.display = 'block';
    const t = pct * (video.duration || 0);
    seekTooltip.textContent = formatTime(t);
  });
  
  window.addEventListener('mouseup', e=>{
    if (isDragging){ 
      isDragging = false; 
      if (wasPlaying) {
        video.play(); 
      }
    }
    seekTooltip.style.display = 'none';
    if (!video.paused) startHideTimer();
  });
  
  progress.addEventListener('click', e=>{ seekToClientX(e.clientX); });

  speedBtn.addEventListener('click', ()=>{ 
    speedPanel.style.display = speedPanel.style.display==='block' ? 'none' : 'block'; 
    showControls(); 
    stopHideTimer(); // ØªØ§ ÙˆÙ‚ØªÛŒ Ù…Ù†Ùˆ Ø¨Ø§Ø²Ù‡ Ù…Ø®ÙÛŒ Ù†Ø´Ù‡
  });
  
  speedPanel.addEventListener('click', e=>{
    const s = e.target.dataset.speed;
    if (!s) return;
    video.playbackRate = parseFloat(s);
    speedBtn.textContent = s + 'Ã—';
    speedPanel.style.display = 'none';
    if (!video.paused) startHideTimer();
  });

  ccBtn.addEventListener('click', ()=>{ 
    ccPanel.style.display = ccPanel.style.display==='block' ? 'none' : 'block'; 
    showControls();
    stopHideTimer();
  });
  
  ccPanel.addEventListener('click', e=>{
    const mode = e.target.dataset.cc;
    if (mode === 'on'){
      if (!trackEl.src) {
        const vtt = "WEBVTT\n\n00:00.000 --> 10:00.000\nYour video is playing.";
        const blob = new Blob([vtt], {type:'text/vtt'});
        trackEl.src = URL.createObjectURL(blob);
      }
      trackEl.mode = 'showing';
      subtitleEl.classList.remove('hidden');
      subtitleEl.textContent = '';
    } else {
      trackEl.mode = 'disabled';
      subtitleEl.classList.add('hidden');
    }
    ccPanel.style.display = 'none';
    if (!video.paused) startHideTimer();
  });

  fsBtn.addEventListener('click', ()=>{
    if (!document.fullscreenElement) playerWrap.requestFullscreen?.();
    else document.exitFullscreen?.();
  });

  downloadBtn.addEventListener('click', ()=>{
    const src = document.getElementById('main-src')?.src || video.querySelector('source')?.src;
    if (!src) return alert('Download link not available');
    const a = document.createElement('a');
    a.href = src;
    a.download = src.split('/').pop().split('?')[0] || 'video.mp4';
    document.body.appendChild(a);
    a.click();
    a.remove();
  });

  pipBtn.addEventListener('click', async ()=>{
    try {
      if (document.pictureInPictureElement) await document.exitPictureInPicture();
      else if (document.pictureInPictureEnabled) await video.requestPictureInPicture();
    } catch(e){ console.warn(e); }
  });

  // --- Loading Spinner Events ---
  video.addEventListener('waiting', () => {
    loaderWrap.classList.add('active');
  });
  video.addEventListener('playing', () => {
    loaderWrap.classList.remove('active');
  });
  video.addEventListener('canplay', () => {
    loaderWrap.classList.remove('active');
  });

  window.addEventListener('keydown', (e)=>{
    showControls();
    if (!video.paused) startHideTimer();
    
    if (e.code === 'Space') { e.preventDefault(); togglePlay(); }
    if (e.key === 'ArrowRight') video.currentTime = Math.min(video.duration || Infinity, video.currentTime + 10);
    if (e.key === 'ArrowLeft') video.currentTime = Math.max(0, video.currentTime - 10);
    if (e.key === 'f') fsBtn.click();
  });

})();
</script>
</body>
</html>
